!function(){function n(i,r){for(;;){if(!(i instanceof Array))return e(i,r);if("def"==i[0])return r[i[1]]=n(i[2],r);if("`"==i[0])return i[1];if("fn"==i[0]){let t=function(...t){return n(i[2],e(i[1],r,t))};return t.A=[i[2],r,i[1]],t}if("let"==i[0]){r=Object.create(r);for(let e in i[1])e%2&&(r[i[1][e-1]]=n(i[1][e],r));i=i[2]}else if("do"==i[0]){let n=e(i.slice(1,i.length-1),r);i=i[i.length-1]}else if("if"==i[0])i=n(i[1],r)?i[2]:i[3];else{let n=e(i,r),t=n[0];if(!t.A)return t(...n.slice(1));i=t.A[0],r=e(t.A[2],t.A[1],n.slice(1))}}}let e=function(e,i,r){return r?(i=Object.create(i),e.some((n,t)=>"&"==n?i[e[t+1]]=r.slice(t):(i[n]=r[t],0)),i):e instanceof Array?e.map((...e)=>n(e[0],i)):typeof ""==typeof e?e in i?i[e]:null[e]:e},i=Object.assign(this,{eval:(...e)=>n(e[0],i),"=":(...n)=>n[0]===n[1],"<":(...n)=>n[0]<n[1],"+":(...n)=>n[0]+n[1],"-":(...n)=>n[0]-n[1],"*":(...n)=>n[0]*n[1],"/":(...n)=>n[0]/n[1],read:(...n)=>JSON.parse(n[0]),slurp:(...n)=>require("fs").readFileSync(n[0],"utf8"),load:(...e)=>n(JSON.parse(require("fs").readFileSync(e[0],"utf8")),i),ARGS:process.argv.slice(3)});process.argv[2]?i.load(process.argv[2]):require("repl").start({eval:(...e)=>e[3](0,n(JSON.parse(e[0]),i)),writer:JSON.stringify,terminal:0})}()
